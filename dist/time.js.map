{"version":3,"file":"time.js","sources":["../src/polyfills.js","../src/app/global.js","../src/app/task/sequencer/sequenceGoto.js","../src/app/task/sequencer/createDB.js","../src/app/task/canvas/getSize.js","../src/app/task/canvas/adjust_canvas.js","../src/app/task/canvas/applyCanvasStyles.js","../node_modules/mithril-stream/stream.js","../node_modules/minno-css/css.js","../src/app/task/canvas/canvasSetup.js","../src/app/setup.js","../src/app/task/sequencer/preloader.js","../src/app/task/sequencer/buildUrl.js","../src/app/task/sequencer/scriptPreloader.js","../node_modules/fastdom/fastdom.js","../src/app/preloadPhase.js","../src/app/trial/input/bindings/mouseEvents.js","../src/app/trial/input/bindings/keypressed.js","../src/app/trial/input/bindings/keyup.js","../src/app/trial/input/bindings/simpleRandomize.js","../src/app/trial/input/bindings/timeout.js","../src/app/trial/input/binder.js","../src/app/trial/input/createListener.js","../src/app/trial/input/now.js","../src/app/trial/input/input.js","../src/app/trial/stimulus/getMedia.js","../src/app/trial/stimulus/setSize.js","../src/app/trial/stimulus/setPlace.js","../src/app/trial/stimulus/Stimulus.js","../src/app/trial/stimulus/stimulusCollection.js","../src/app/trial/interactions/getConditionFn.js","../src/app/trial/interactions/conditionsEvaluate.js","../src/app/trial/interactions/actionList.js","../src/app/trial/interactions/action.js","../src/app/trial/interactions/interactions.js","../src/app/trial/Trial.js","../src/app/task/sequencer/nextTrial.js","../src/app/task/logger/post.js","../src/app/task/logger/poster.js","../src/app/task/logger/transformLogs.js","../src/app/task/logger/createLogs.js","../src/app/playPhase.js","../src/index.js"],"sourcesContent":["if (!Date.now) Date.now = function() { return new Date().getTime(); };\n\nfunction log(){ console.log.apply(console, arguments); }\nif (!console.group) console.group = log;\nif (!console.groupCollapsed) console.groupCollapsed = log;\nif (!console.groupEnd) console.groupEnd = log;\nif (!console.table) console.table = log;\n\n\n(function() {\n    'use strict';\n\n    var vendors = ['webkit', 'moz'];\n    for (var i = 0; i < vendors.length && !window.requestAnimationFrame; ++i) {\n        var vp = vendors[i];\n        window.requestAnimationFrame = window[vp+'RequestAnimationFrame'];\n        window.cancelAnimationFrame = (window[vp+'CancelAnimationFrame']\n            || window[vp+'CancelRequestAnimationFrame']);\n    }\n    // iOS6 is buggy\n    if (/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent) || !window.requestAnimationFrame || !window.cancelAnimationFrame) {\n        var lastTime = 0;\n        window.requestAnimationFrame = function(callback) {\n            var now = Date.now();\n            var nextTime = Math.max(lastTime + 16, now);\n            return setTimeout(function() { callback(lastTime = nextTime); },\n                              nextTime - now);\n        };\n        window.cancelAnimationFrame = clearTimeout;\n    }\n}());\n\n// Promise polyfill from https://github.com/MithrilJS/mithril.js/blob/next/promise/promise.js \n\"use strict\"\n/** @constructor */\nvar PromisePolyfill = function(executor) {\n    if (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with `new`\")\n        if (typeof executor !== \"function\") throw new TypeError(\"executor must be a function\")\n\n            var self = this, resolvers = [], rejectors = [], resolveCurrent = handler(resolvers, true), rejectCurrent = handler(rejectors, false)\n            var instance = self._instance = {resolvers: resolvers, rejectors: rejectors}\n            var callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n            function handler(list, shouldAbsorb) {\n                return function execute(value) {\n                    var then\n                    try {\n                        if (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n                            if (value === self) throw new TypeError(\"Promise can't be resolved w/ itself\")\n                                executeOnce(then.bind(value))\n                        }\n                        else {\n                            callAsync(function() {\n                                if (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value)\n                                    for (var i = 0; i < list.length; i++) list[i](value)\n                                        resolvers.length = 0, rejectors.length = 0\n                                instance.state = shouldAbsorb\n                                instance.retry = function() {execute(value)}\n                            })\n                        }\n                    }\n                    catch (e) {\n                        rejectCurrent(e)\n                    }\n                }\n            }\n            function executeOnce(then) {\n                var runs = 0\n                function run(fn) {\n                    return function(value) {\n                        if (runs++ > 0) return\n                        fn(value)\n                    }\n                }\n                var onerror = run(rejectCurrent)\n                try {then(run(resolveCurrent), onerror)} catch (e) {onerror(e)}\n            }\n\n            executeOnce(executor)\n}\nPromisePolyfill.prototype.then = function(onFulfilled, onRejection) {\n    var self = this, instance = self._instance\n    function handle(callback, list, next, state) {\n        list.push(function(value) {\n            if (typeof callback !== \"function\") next(value)\n                else try {resolveNext(callback(value))} catch (e) {if (rejectNext) rejectNext(e)}\n        })\n        if (typeof instance.retry === \"function\" && state === instance.state) instance.retry()\n    }\nvar resolveNext, rejectNext\nvar promise = new PromisePolyfill(function(resolve, reject) {resolveNext = resolve, rejectNext = reject})\nhandle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false)\nreturn promise\n}\nPromisePolyfill.prototype.catch = function(onRejection) {\n    return this.then(null, onRejection)\n}\nPromisePolyfill.resolve = function(value) {\n    if (value instanceof PromisePolyfill) return value\n    return new PromisePolyfill(function(resolve) {resolve(value)})\n}\nPromisePolyfill.reject = function(value) {\n    return new PromisePolyfill(function(resolve, reject) {reject(value)})\n}\nPromisePolyfill.all = function(list) {\n    return new PromisePolyfill(function(resolve, reject) {\n        var total = list.length, count = 0, values = []\n        if (list.length === 0) resolve([])\n            else for (var i = 0; i < list.length; i++) {\n                (function(i) {\n                    function consume(value) {\n                        count++\n                            values[i] = value\n                            if (count === total) resolve(values)\n                    }\n                if (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") {\n                    list[i].then(consume, reject)\n                }\n                else consume(list[i])\n                })(i)\n            }\n    })\n}\nPromisePolyfill.race = function(list) {\n    return new PromisePolyfill(function(resolve, reject) {\n        for (var i = 0; i < list.length; i++) {\n            list[i].then(resolve, reject)\n        }\n    })\n}\n\nif (typeof window.Promise === \"undefined\") window.Promise = PromisePolyfill\n","export default global;\n\n// initiate piGloabl\nvar glob = window.piGlobal || (window.piGlobal = {});\n\nfunction global(){\n    return glob;\n}\n\n","/**\n * Go to a destination within the sequence (must be a property of a sequence)\n * @param  {String} target destination type\n * @param  {Object} properties destination options\n * @return {Object}        result element\n */\n\nimport _ from 'lodash';\nexport default go;\n\nfunction go(destination, properties, context){\n    var mixerSequence = this.mixerSequence;\n\n    switch (destination){\n        case 'nextWhere':\n            where('next', properties, context, mixerSequence);\n            break;\n        case 'previousWhere':\n            where('next', properties, context, mixerSequence);\n            break;\n        case 'current':\n            // don't need to do anything...\n            break;\n        case 'first':\n            do {mixerSequence.prev(context);} while (mixerSequence.current(context));\n            break;\n        case 'last':\n            do {mixerSequence.next(context);} while (mixerSequence.current(context));\n            mixerSequence.prev();\n            break;\n        case 'end':\n            do {mixerSequence.next(context);} while (mixerSequence.current(context));\n            break;\n        case 'next' :\n            mixerSequence.next(context); // get the next trial, in case there are no more trials, returns undefined\n            break;\n        default:\n            throw new Error('Unknow destination \"' + destination + '\" for goto.');\n    }\n\n    return this;\n}\n\nfunction where(direction, properties, context, sequence){\n    var curr;\n\n    do {\n        sequence[direction]();\n        curr = sequence.current(context);\n    } while (curr && !_.callback(properties)(curr.data));\n}\n","/*\n * this file is resposible for taking the experiment script (json) and parsing it\n */\n\n// load dependancies\nimport _ from 'lodash';\nimport Database from 'minno-sequencer';\nimport go from './sequenceGoto';\n\nexport default createDB;\n\nfunction createDB(script){\n    var db = new Database();\n    db.createColl('trial');\n    db.createColl('stimulus');\n    db.createColl('media');\n\n    db.add('trial', script.trialSets || []);\n    db.add('stimulus', script.stimulusSets || []);\n    db.add('media', script.mediaSets || []);\n\n    if (!_.isArray(script.sequence)) throw new Error('You must set a sequence array.');\n\n    var sequence = db.sequence('trial', script.sequence);\n    sequence.go = go; // see sequence/goto.js to understand why we are doing this\n    db.currentSequence = sequence;\n    return db;\n}\n","export default getSize;\n\n// helper function: returns sizes of element;\nfunction getSize(el){\n    var computedStyle = window.getComputedStyle(el);\n    return {\n        height    : parse(el.offsetHeight) - parse(computedStyle.borderTopWidth) - parse(computedStyle.borderBottomWidth),\n        width    : parse(el.offsetWidth) - parse(computedStyle.borderLeftWidth) - parse(computedStyle.borderRightWidth)\n    };\n}\n\nfunction parse(num){ return parseFloat(num, 10) || 0;}\n","/*\n * adjust canvas according to window size and settings\n * this module is built to be part of the main view\n */\n\nimport _ from 'lodash';\nimport getSize from './getSize';\n\nexport default adjust_canvas;\n\n// the function to be used by the main view\nfunction adjust_canvas(canvas, settings){\n\n    return _.throttle(eventListener, 16);\n\n    function eventListener(event){\n        // we put this in a time out because of a latency of orientation change on android devices\n        if (event.type == 'orientationchange') setTimeout(resize, 500);\n        else resize();\n    }\n\n    function resize(){\n        var targetSize = getTargetSize(settings, canvas);\n\n        // remove border width and top margin from calculated width (can't depend on cool box styles yet...)\n        // we compute only margin-top because of a difference calculating margins between chrome + IE and firefox + mobile\n        var computedStyle = window.getComputedStyle(canvas);\n        targetSize.height -= parse(computedStyle.borderTopWidth) + parse(computedStyle.borderBottomWidth) + parse(computedStyle.marginTop);\n        targetSize.width -= parse(computedStyle.borderLeftWidth) + parse(computedStyle.borderRightWidth);\n\n        // reset canvas size\n        canvas.style.width = targetSize.width + 'px';\n        canvas.style.height = targetSize.height + 'px';\n        canvas.style.fontSize = targetSize.height*(settings.textSize || 3)/100 + 'px';\n\n        // scroll to top of window (hides some of the mess on the top of mobile devices)\n        window.scrollTo(0, 1);\n    }\n}\n\nfunction getProportions(settings){\n    // if proportions are an object they should include width and height\n    if (_.isPlainObject(settings.proportions)) {\n        if (typeof settings.proportions.height !== 'number' || typeof settings.proportions.width !== 'number'){\n            throw new Error('The canvas proportions object`s height and a width properties must be numeric');\n        }\n        return settings.proportions.height/settings.proportions.width; \n    } \n    return settings.proportions || 0.8; // by default proportions are 0.8\n}\n\nfunction getTargetSize(settings, canvas){\n    // calculate proportions (as height/width)\n    var proportions = getProportions(settings);\n\n    // static canvas size\n    // ------------------\n    if (settings.width) return {\n        width: settings.width,\n        height: settings.width*proportions\n    };\n\n    // dynamic canvas size\n    // -------------------\n\n    var docElement = window.document.documentElement; // used to get client view size\n\n    var maxHeight = docElement.clientHeight;\n    var maxWidth = Math.min(settings.maxWidth, docElement.clientWidth, getSize(canvas.parentNode).width);\n\n    // calculate the correct size for this screen size\n    if (maxHeight > proportions * maxWidth) return { height: maxWidth*proportions, width: maxWidth };\n    else return { height: maxHeight, width: maxHeight/proportions};\n}\n\nfunction parse(num){ return parseFloat(num, 10) || 0;}\n","/**\n *\n * This whole module taken from piManager\n *\n */\n\nimport _ from 'lodash';\nexport default canvasContructor;\n\n/**\n * Takes a map of css rules and applies them.\n * Returns a function that returns the page to its former condition.\n *\n * The rule map is an object of ruleName -> ruleObject.\n *\n * var ruleObject = {\n * \telement : wrapped element to affect\n * \tproperty: css property to modify\n * }\n *\n * @param  {Object} map      A hash of rules.\n * @param  {Object} settings A hash of ruleName -> value\n * @return {Function}        A function that undoes all the previous changes\n */\nfunction canvasContructor(map, settings){\n    var offArr;\n\n    if (!_.isPlainObject(map)) throw new Error('canvas(map): You must set a rule map for canvas to work properly');\n\n    // if settings is undefined return a function that doesn't do anything\n    // just so we don't need to make sure that the user modifies the canvas\n    if (_.isUndefined(settings)) return _.noop;\n    if (!_.isPlainObject(settings)) throw new Error('canvas(settings): canvas settings must be an object');\n\n    // create an array of off functions to undo any changes by this action\n    offArr = _.map(settings, function(value,key){\n        var rule = map[key];\n        if (rule) return on(rule.element, rule.property, value);\n        throw new Error('canvas('+ key +'): unknow key in canvas object.');\n    });\n\n    return function off(){\n        _.forEach(offArr, function(fn){fn.call();});\n    };\n}\n\nfunction on(el, property, value){\n    var old = el.style[property]; // save old value\n    el.style[property] = value; // set new value\n    return function(){el.style[property] = old;};  // create off function\n}\n\n","/* eslint-disable */\r\n;(function() {\r\n\"use strict\"\r\n/* eslint-enable */\r\n\r\nvar guid = 0, HALT = {}\r\nfunction createStream() {\r\n\tfunction stream() {\r\n\t\tif (arguments.length > 0 && arguments[0] !== HALT) updateStream(stream, arguments[0])\r\n\t\treturn stream._state.value\r\n\t}\r\n\tinitStream(stream)\r\n\r\n\tif (arguments.length > 0 && arguments[0] !== HALT) updateStream(stream, arguments[0])\r\n\r\n\treturn stream\r\n}\r\nfunction initStream(stream) {\r\n\tstream.constructor = createStream\r\n\tstream._state = {id: guid++, value: undefined, state: 0, derive: undefined, recover: undefined, deps: {}, parents: [], endStream: undefined, unregister: undefined}\r\n\tstream.map = stream[\"fantasy-land/map\"] = map, stream[\"fantasy-land/ap\"] = ap, stream[\"fantasy-land/of\"] = createStream\r\n\tstream.valueOf = valueOf, stream.toJSON = toJSON, stream.toString = valueOf\r\n\r\n\tObject.defineProperties(stream, {\r\n\t\tend: {get: function() {\r\n\t\t\tif (!stream._state.endStream) {\r\n\t\t\t\tvar endStream = createStream()\r\n\t\t\t\tendStream.map(function(value) {\r\n\t\t\t\t\tif (value === true) {\r\n\t\t\t\t\t\tunregisterStream(stream)\r\n\t\t\t\t\t\tendStream._state.unregister = function(){unregisterStream(endStream)}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn value\r\n\t\t\t\t})\r\n\t\t\t\tstream._state.endStream = endStream\r\n\t\t\t}\r\n\t\t\treturn stream._state.endStream\r\n\t\t}}\r\n\t})\r\n}\r\nfunction updateStream(stream, value) {\r\n\tupdateState(stream, value)\r\n\tfor (var id in stream._state.deps) updateDependency(stream._state.deps[id], false)\r\n\tif (stream._state.unregister != null) stream._state.unregister()\r\n\tfinalize(stream)\r\n}\r\nfunction updateState(stream, value) {\r\n\tstream._state.value = value\r\n\tstream._state.changed = true\r\n\tif (stream._state.state !== 2) stream._state.state = 1\r\n}\r\nfunction updateDependency(stream, mustSync) {\r\n\tvar state = stream._state, parents = state.parents\r\n\tif (parents.length > 0 && parents.every(active) && (mustSync || parents.some(changed))) {\r\n\t\tvar value = stream._state.derive()\r\n\t\tif (value === HALT) return false\r\n\t\tupdateState(stream, value)\r\n\t}\r\n}\r\nfunction finalize(stream) {\r\n\tstream._state.changed = false\r\n\tfor (var id in stream._state.deps) stream._state.deps[id]._state.changed = false\r\n}\r\n\r\nfunction combine(fn, streams) {\r\n\tif (!streams.every(valid)) throw new Error(\"Ensure that each item passed to stream.combine/stream.merge is a stream\")\r\n\treturn initDependency(createStream(), streams, function() {\r\n\t\treturn fn.apply(this, streams.concat([streams.filter(changed)]))\r\n\t})\r\n}\r\n\r\nfunction initDependency(dep, streams, derive) {\r\n\tvar state = dep._state\r\n\tstate.derive = derive\r\n\tstate.parents = streams.filter(notEnded)\r\n\r\n\tregisterDependency(dep, state.parents)\r\n\tupdateDependency(dep, true)\r\n\r\n\treturn dep\r\n}\r\nfunction registerDependency(stream, parents) {\r\n\tfor (var i = 0; i < parents.length; i++) {\r\n\t\tparents[i]._state.deps[stream._state.id] = stream\r\n\t\tregisterDependency(stream, parents[i]._state.parents)\r\n\t}\r\n}\r\nfunction unregisterStream(stream) {\r\n\tfor (var i = 0; i < stream._state.parents.length; i++) {\r\n\t\tvar parent = stream._state.parents[i]\r\n\t\tdelete parent._state.deps[stream._state.id]\r\n\t}\r\n\tfor (var id in stream._state.deps) {\r\n\t\tvar dependent = stream._state.deps[id]\r\n\t\tvar index = dependent._state.parents.indexOf(stream)\r\n\t\tif (index > -1) dependent._state.parents.splice(index, 1)\r\n\t}\r\n\tstream._state.state = 2 //ended\r\n\tstream._state.deps = {}\r\n}\r\n\r\nfunction map(fn) {return combine(function(stream) {return fn(stream())}, [this])}\r\nfunction ap(stream) {return combine(function(s1, s2) {return s1()(s2())}, [stream, this])}\r\nfunction valueOf() {return this._state.value}\r\nfunction toJSON() {return this._state.value != null && typeof this._state.value.toJSON === \"function\" ? this._state.value.toJSON() : this._state.value}\r\n\r\nfunction valid(stream) {return stream._state }\r\nfunction active(stream) {return stream._state.state === 1}\r\nfunction changed(stream) {return stream._state.changed}\r\nfunction notEnded(stream) {return stream._state.state !== 2}\r\n\r\nfunction merge(streams) {\r\n\treturn combine(function() {\r\n\t\treturn streams.map(function(s) {return s()})\r\n\t}, streams)\r\n}\r\n\r\nfunction scan(reducer, seed, stream) {\r\n\tvar newStream = combine(function (s) {\r\n\t\treturn seed = reducer(seed, s._state.value)\r\n\t}, [stream])\r\n\r\n\tif (newStream._state.state === 0) newStream(seed)\r\n\r\n\treturn newStream\r\n}\r\n\r\nfunction scanMerge(tuples, seed) {\r\n\tvar streams = tuples.map(function(tuple) {\r\n\t\tvar stream = tuple[0]\r\n\t\tif (stream._state.state === 0) stream(undefined)\r\n\t\treturn stream\r\n\t})\r\n\r\n\tvar newStream = combine(function() {\r\n\t\tvar changed = arguments[arguments.length - 1]\r\n\r\n\t\tstreams.forEach(function(stream, idx) {\r\n\t\t\tif (changed.indexOf(stream) > -1) {\r\n\t\t\t\tseed = tuples[idx][1](seed, stream._state.value)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn seed\r\n\t}, streams)\r\n\r\n\treturn newStream\r\n}\r\n\r\ncreateStream[\"fantasy-land/of\"] = createStream\r\ncreateStream.merge = merge\r\ncreateStream.combine = combine\r\ncreateStream.scan = scan\r\ncreateStream.scanMerge = scanMerge\r\ncreateStream.HALT = HALT\r\n\r\nif (typeof module !== \"undefined\") module[\"exports\"] = createStream\r\nelse if (typeof window.m === \"function\" && !(\"stream\" in window.m)) window.m.stream = createStream\r\nelse window.m = {stream : createStream}\r\n\r\n}());\r\n","module.exports = css;\n\n/**\n * @arg el DOMElement any dom element\n * @arg obj Object a hash of styleName:value, where the style name may be either css-style or jsStyle (camelCase)\n * @returns void\n *\n * The function applies the styles set in obj to the el\n **/\n\nfunction css(el, obj){\n    var style = el.style;\n\n    if (!obj) return;\n\n    for (var key in obj) style[camelCase(key)] = obj[key];\n\n    function camelCase(str){ \n        return  str.replace(/-([a-z])/g, function (g) { return g[1].toUpperCase(); }); \n    }\n}\n","import _ from 'lodash';\nimport adjustCanvas from './adjust_canvas';\nimport applyCanvasStyles from './applyCanvasStyles';\nimport stream from 'mithril-stream';\nimport css from 'minno-css';\n\nexport default setupCanvas;\n\nfunction setupCanvas(canvas, canvasSettings){\n    canvasSettings || (canvasSettings = {});\n    var $resize = stream();\n\n    if (!_.isElement(canvas)) throw new Error('Minno-time: canvas is not a DOM element');\n\n    canvas.classList.add('minno-canvas');\n\n    // apply canvas styles\n    var map = {\n        background \t\t\t: {element: document.body, property: 'backgroundColor'},\n        canvasBackground\t: {element: canvas, property:'backgroundColor'},\n        borderColor\t\t\t: {element: canvas, property:'borderColor'},\n        borderWidth\t\t\t: {element: canvas, property:'borderWidth'}\n    };\n\n    var off = applyCanvasStyles(map, _.pick(canvasSettings,['background','canvasBackground','borderColor','borderWidth']));\n\n    canvasSettings.css && css(canvas, canvasSettings.css);\n\n    // setup canvas resize\n    $resize.map(adjustCanvas(canvas, canvasSettings));\n    $resize({});\n\n    window.addEventListener('orientationchange', $resize);\n    window.addEventListener('resize', $resize);\n\n    $resize.end\n        .map(function(){canvas.classList.remove('minno-canvas');})\n        .map(function removeListeners(){\n            window.removeEventListener('orientationchange',$resize);\n            window.removeEventListener('resize', $resize);\n        })\n        .map(off);\n\n\n\n    return $resize;\n\n}\n","import _ from 'lodash';\nimport global from './global';\nimport createDB from './task/sequencer/createDB';\nimport canvasSetup from './task/canvas/canvasSetup';\n\nexport default setup;\n\nfunction setup(canvas, script){\n    var $resize = canvasSetup(canvas, _.get(script, 'settings.canvas', {}));\n    var db = createDB(script);\n    setupVars(script);\n\n    return {\n        db:db, \n        $resize:$resize,\n        canvas: canvas,\n        script: script,\n        settings: script.settings || {}\n    };\n}\n\nfunction setupVars(script){\n    // init global\n    var glob = global(global());\n    var name = script.name || 'anonymous minno-time';\n    var current = script.current ? script.current : {};\n\n    current.logs || (current.logs = []); // init logs object\n    glob[name] = glob.current = current; // create local namespace\n}\n","\n/*\n * media preloader\n * TODO: turn into factory, possibly make progress into a stream.\n */\nexport default loader;\n\nvar srcStack = [];\t\t\t\t// an array holding all our sources\nvar defStack = [];\t\t\t\t// an array holding all the deferreds\nvar stackDone = 0;\t\t\t\t// the number of sources we have completed downloading\nvar images = {};\n\nvar loader = {\n    // loads a single source\n    load: load,\n\n    all: function(){\n        return Promise.all(defStack);\n    },\n\n    progress: function(){\n        return defStack.length ? stackDone/defStack.length : 1;\n    }\n};\n\n// load a single source\nfunction load(src, type){\n    var promise;\n    type = type || 'image';\n    // the source was already loaded\n    if (srcStack.indexOf(src) !== -1) return false;\n\n    // if we haven't loaded this yet\n    switch (type) {\n        case 'template':\n            promise = new Promise(function(resolve, reject){\n                // @TODO: get rid of requirejs dependency\n                requirejs(['text!' + src], resolve, function(){\n                    reject(new Error('Template not found: ' + src));\n                });\n            });\n            break;\n        case 'image':\n            /* falls through */\n        default :\n            promise = new Promise(function(resolve, reject){\n                var el = document.createElement('img');\n                el.onload = function(){resolve(el);};\n                el.onerror = function(){reject(new Error('Image not found: ' + el.src ));};\n                el.src = src;\n                images[src] = el;\n            });\n            break;\n    }\n\n    promise\n        .then(function(){stackDone++;})\n        .then(function(){\n            loader.onload && loader.onload();\n        });\n\n    // keep defered and source for later.\n    defStack.push(promise);\n    srcStack.push(src);\n\n    return promise;\n}\n","/*\n * build the url for this src (add the generic baseUrl)\n * @Todo: pass in the baseUrl (drop global settings, pass them through the sink).\n */\n\nimport _ from 'lodash';\n\n/**\n * @param baseUrl {String|Object} the base url to prepend\n * @param url {String} the url we are dealing with\n * @param type {String} the type of resource we are dealing with (image or tempmlate) in case we have multiple base urls\n *\n * @returns String built url\n **/\nexport default function buildUrl(baseUrl, url, type){\n    // it this is a dataUrl type of image, we don't need to append the baseurl\n    if (type == 'image' && /^data:image/.test(url)) return url;\n\n    // the base url setting may be either a string, or an object with the type as a field\n    if (_.isObject(baseUrl)) baseUrl = baseUrl[type];\n\n    // make sure base url is set, and add trailing slash if needed\n    if (!baseUrl) baseUrl = '';\n    else if (baseUrl[baseUrl.length-1] != '/') baseUrl += '/';\n\n    return baseUrl + url;\n}\n","/*\n * gets all media that needs preloading and preloads it\n */\n\nimport _ from 'lodash';\nimport preloader from './preloader';\nimport buildUrl from './buildUrl';\n\nexport default preloadScript;\n\nfunction preloadScript(script, baseUrl){\n    getScriptMedia(script).forEach(loadMedia);\n    return preloader;\n\n    function loadMedia(media){\n        if (!_.isUndefined(media.image)) preloader.load(buildUrl(baseUrl, media.image, 'image'),'image');\n        if (!_.isUndefined(media.template)) preloader.load(buildUrl(baseUrl, media.template,'template'),'template');\n    }\n}\n\n/**\n * Iterates over a script and gathers all media\n **/\nexport function getScriptMedia(script){\n    var mediaSets = script.mediaSets;\n    var stimulusSets = _.map(script.stimulusSets, getStimMedia);\n    var trialSets = _.map(script.trialSets, getTrialMedia);\n    var sequence = _.filter(script.sequence,notMixer).map(getTrialMedia);\n\n    return _.flattenDeep([mediaSets, stimulusSets, trialSets, sequence]).filter(notUndefined);\n} \n\nfunction getTrialMedia(trial){\n    return [\n        _.map(trial.input, function(input){ return input.element; }),\n        _.map(trial.stimuli, getStimMedia),\n        _.map(trial.layout, getStimMedia)\n    ];\n}\n\nfunction getStimMedia(stim){ return stim.media; }\nfunction notMixer(trial){ return !trial.mixer; }\nfunction notUndefined(val){ return !_.isUndefined(val); }\n","!(function(win) {\n\n/**\n * FastDom\n *\n * Eliminates layout thrashing\n * by batching DOM read/write\n * interactions.\n *\n * @author Wilson Page <wilsonpage@me.com>\n * @author Kornel Lesinski <kornel.lesinski@ft.com>\n */\n\n'use strict';\n\n/**\n * Mini logger\n *\n * @return {Function}\n */\nvar debug = 0 ? console.log.bind(console, '[fastdom]') : function() {};\n\n/**\n * Normalized rAF\n *\n * @type {Function}\n */\nvar raf = win.requestAnimationFrame\n  || win.webkitRequestAnimationFrame\n  || win.mozRequestAnimationFrame\n  || win.msRequestAnimationFrame\n  || function(cb) { return setTimeout(cb, 16); };\n\n/**\n * Initialize a `FastDom`.\n *\n * @constructor\n */\nfunction FastDom() {\n  var self = this;\n  self.reads = [];\n  self.writes = [];\n  self.raf = raf.bind(win); // test hook\n  debug('initialized', self);\n}\n\nFastDom.prototype = {\n  constructor: FastDom,\n\n  /**\n   * Adds a job to the read batch and\n   * schedules a new frame if need be.\n   *\n   * @param  {Function} fn\n   * @public\n   */\n  measure: function(fn, ctx) {\n    debug('measure');\n    var task = !ctx ? fn : fn.bind(ctx);\n    this.reads.push(task);\n    scheduleFlush(this);\n    return task;\n  },\n\n  /**\n   * Adds a job to the\n   * write batch and schedules\n   * a new frame if need be.\n   *\n   * @param  {Function} fn\n   * @public\n   */\n  mutate: function(fn, ctx) {\n    debug('mutate');\n    var task = !ctx ? fn : fn.bind(ctx);\n    this.writes.push(task);\n    scheduleFlush(this);\n    return task;\n  },\n\n  /**\n   * Clears a scheduled 'read' or 'write' task.\n   *\n   * @param {Object} task\n   * @return {Boolean} success\n   * @public\n   */\n  clear: function(task) {\n    debug('clear', task);\n    return remove(this.reads, task) || remove(this.writes, task);\n  },\n\n  /**\n   * Extend this FastDom with some\n   * custom functionality.\n   *\n   * Because fastdom must *always* be a\n   * singleton, we're actually extending\n   * the fastdom instance. This means tasks\n   * scheduled by an extension still enter\n   * fastdom's global task queue.\n   *\n   * The 'super' instance can be accessed\n   * from `this.fastdom`.\n   *\n   * @example\n   *\n   * var myFastdom = fastdom.extend({\n   *   initialize: function() {\n   *     // runs on creation\n   *   },\n   *\n   *   // override a method\n   *   measure: function(fn) {\n   *     // do extra stuff ...\n   *\n   *     // then call the original\n   *     return this.fastdom.measure(fn);\n   *   },\n   *\n   *   ...\n   * });\n   *\n   * @param  {Object} props  properties to mixin\n   * @return {FastDom}\n   */\n  extend: function(props) {\n    debug('extend', props);\n    if (typeof props != 'object') throw new Error('expected object');\n\n    var child = Object.create(this);\n    mixin(child, props);\n    child.fastdom = this;\n\n    // run optional creation hook\n    if (child.initialize) child.initialize();\n\n    return child;\n  },\n\n  // override this with a function\n  // to prevent Errors in console\n  // when tasks throw\n  catch: null\n};\n\n/**\n * Schedules a new read/write\n * batch if one isn't pending.\n *\n * @private\n */\nfunction scheduleFlush(fastdom) {\n  if (!fastdom.scheduled) {\n    fastdom.scheduled = true;\n    fastdom.raf(flush.bind(null, fastdom));\n    debug('flush scheduled');\n  }\n}\n\n/**\n * Runs queued `read` and `write` tasks.\n *\n * Errors are caught and thrown by default.\n * If a `.catch` function has been defined\n * it is called instead.\n *\n * @private\n */\nfunction flush(fastdom) {\n  debug('flush');\n\n  var writes = fastdom.writes;\n  var reads = fastdom.reads;\n  var error;\n\n  try {\n    debug('flushing reads', reads.length);\n    runTasks(reads);\n    debug('flushing writes', writes.length);\n    runTasks(writes);\n  } catch (e) { error = e; }\n\n  fastdom.scheduled = false;\n\n  // If the batch errored we may still have tasks queued\n  if (reads.length || writes.length) scheduleFlush(fastdom);\n\n  if (error) {\n    debug('task errored', error.message);\n    if (fastdom.catch) fastdom.catch(error);\n    else throw error;\n  }\n}\n\n/**\n * We run this inside a try catch\n * so that if any jobs error, we\n * are able to recover and continue\n * to flush the batch until it's empty.\n *\n * @private\n */\nfunction runTasks(tasks) {\n  debug('run tasks');\n  var task; while (task = tasks.shift()) task();\n}\n\n/**\n * Remove an item from an Array.\n *\n * @param  {Array} array\n * @param  {*} item\n * @return {Boolean}\n */\nfunction remove(array, item) {\n  var index = array.indexOf(item);\n  return !!~index && !!array.splice(index, 1);\n}\n\n/**\n * Mixin own properties of source\n * object into the target.\n *\n * @param  {Object} target\n * @param  {Object} source\n */\nfunction mixin(target, source) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) target[key] = source[key];\n  }\n}\n\n// There should never be more than\n// one instance of `FastDom` in an app\nvar exports = win.fastdom = (win.fastdom || new FastDom()); // jshint ignore:line\n\n// Expose to CJS & AMD\nif ((typeof define) == 'function') define(function() { return exports; });\nelse if ((typeof module) == 'object') module.exports = exports;\n\n})( typeof window !== 'undefined' ? window : this);\n","import scriptPreloader from './task/sequencer/scriptPreloader';\nimport fastdom from 'fastdom';\n\nexport default preloadPhase;\n\nfunction preloadPhase(canvas, script){\n    var preloader = scriptPreloader(script, script.base_url);\n\n    if (preloader.progress() == 1) return Promise.resolve().then(emptyCanvas);\n\n    canvas.innerHTML = '<div class=\"minno-progress\"><div class=\"minno-progress-bar\"></div></div>';\n\n    var barStyle = canvas.getElementsByClassName('minno-progress-bar')[0].style;\n    barStyle.width = preloader.progress() + '%';\n    preloader.onload = function(){\n        fastdom.mutate(function(){\n            barStyle.width = preloader.progress()*100 + '%';\n        });\n    };\n\n    return preloader.all()\n        .then(emptyCanvas)['catch'](function(src){\n            throw new Error('loading resource failed, do something about it! (you can start by checking the error log, you are probably reffering to the wrong url - ' + src +')');\n        });\n\n    function emptyCanvas(){\n        while (canvas.firstChild) canvas.removeChild(canvas.firstChild);\n    }\n}\n\n","import css from 'minno-css';\nimport fastdom from 'fastdom';\nimport stream from 'mithril-stream';\n\nexport default mouseEvents;\n\nfunction mouseEvents(eventName,inputObj, canvas){\n    var $listener = stream();\n    var element = inputObj.element;\n\n    if (element){\n        css(element, inputObj.css);\n        fastdom.mutate(function(){\n            canvas.appendChild(element);\n        });\n    }\n\n    canvas.addEventListener(eventName, clickListener);\n\n    $listener.end.map(removeClickListener);\n    return $listener;\n\n    function clickListener(e){\n        var target = e.target;\n        if (element && target === element) return $listener(e);\n        if (!element && target.getAttribute('data-handle') === inputObj.stimHandle) return $listener(e);\n        return;\n    }\n\n    function removeClickListener(){\n        if (element) canvas.removeChild(element);\n        canvas.removeEventListener(eventName, $listener);\n    }\n}\n","/*\n* key pressed listener\n* reqires key\n*\n* key can be either charCode or string.\n* or an array of charCode/strings.\n*/\n\n// we monitor all key up events so that we trigger only once per key down\nimport stream from 'mithril-stream';\nexport default keypressed;\n\nvar keyDownArr = [];\n\ndocument.addEventListener('keyup',function(e){ keyDownArr[e.which] = false; });// unset flag to prevent multi pressing of a key \n\nfunction keypressed(inputObj){\n    var $listener = stream();\n\n    // make sure key is an array\n    var keys = Array.isArray(inputObj.key) ? inputObj.key : [inputObj.key];\n\n    // map keys to keyCodes\n    var target = keys.map(function(value){ \n        return typeof value == 'string' ? value.toUpperCase().charCodeAt(0) : value; \n    });\n\n    document.addEventListener('keydown', keypressListener);\n\n    $listener.end.map(removeKeypressListener);\n    return $listener;\n\n    function keypressListener(e){\n        if (keyDownArr[e.which] || (target.indexOf(e.which) === -1)) return;\n        e.preventDefault(); // prevent FF from wasting about 10ms in browser-content.js (and fast search)\n        keyDownArr[e.which] = true; // set flag to prevent multi pressing of a key\n        $listener(e);\n    }\n\n    function removeKeypressListener(){\n        document.removeEventListener('keydown', keypressListener);\n    }\n}\n","import stream from 'mithril-stream';\nexport default keyup; \n\nfunction keyup(inputObj){\n    var $listener = stream();\n    // make sure key is array\n    var keys = Array.isArray(inputObj.key) ? inputObj.key : [inputObj.key];\n\n    // map keys to keyCodes\n    var target = keys.map(function(value){ \n        return typeof value == 'string' ? value.toUpperCase().charCodeAt(0) : value; \n    });\n\n    document.addEventListener('keyup', keypressListener);\n\n    $listener.end.map(removeKeypressListener);\n    return $listener;\n\n    function keypressListener(e){\n        if (target.indexOf(e.which) === -1) return;\n        e.preventDefault();\n        return $listener(e);\n    }\n\n    function removeKeypressListener(){\n        document.removeEventListener('keyup', $listener);\n    }\n}\n","/**\n *\tTakes a properties objects and returns the result of a randomization:\n *\tIf it is an array - pick a random member\n *\tIf it is an object pick from within a range\n *\tIf it is a function return its result using the context\n *\tOtherwise simply return the properties\n */\nimport _ from 'lodash';\n\nexport default simpleRandomize;\n\nfunction simpleRandomize(properties, context){\n\n    if (_.isArray(properties)) {\n        var index = Math.floor(Math.random()*properties.length);\n        return properties[index];\n    }\n\n    if (_.isFunction(properties)) {\n        return properties.call(context);\n    }\n\n    // this must be after the test for arrays and functions, because they are considered objects too\n    if (_.isPlainObject(properties)) {\n        if (!_.isNumber(properties.min) || !_.isNumber(properties.max) || properties.min > properties.max) {\n            throw new Error('randomization objects need both a max and a minimum property, also max has to be larger than min');\n        }\n        return properties.min + (properties.max - properties.min) * Math.random();\n    }\n\n    // if this is not a randomization object simply return\n    return properties;\n}\n\n","import randomize from './simpleRandomize';\nimport stream from 'mithril-stream';\n\nexport default timeout;\n\nfunction timeout(inputObj){\n    var $listener = stream();\n    var timeoutID;\n    var duration = randomize(inputObj.duration) || 0;\n\n    $listener.end.map(cancel);\n\n    if (duration) setTimeout($listener.bind(null, {}), duration);\n    else $listener({}); // listener is already registered with $events so this should be immidiate\n\n    return $listener;\n\n    function cancel(){\n        clearTimeout(timeoutID);\n    }\n}\n","\nimport _ from 'lodash';\nimport mouseEvents from './bindings/mouseEvents';\nimport keypressed from './bindings/keypressed';\nimport keyup from './bindings/keyup';\nimport timeout from './bindings/timeout';\nimport css from 'minno-css';\n\nexport default inputBinder;\n\n/**\n * The input binder is a hash of default input types\n * It returns a stream of events\n **/\nfunction inputBinder(inputObj, canvas){\n    var on = inputObj.on; // what type of binding is this?\n\n    switch (on){\n\n        case 'keypressed'\t: return keypressed(inputObj);\n\n        case 'keyup'\t\t: return keyup(inputObj);\n\n        case 'click'\t\t:\n        case 'mousedown'    :\n            return mouseEvents('mousedown', inputObj, canvas);\n\n        case 'mouseup'\t    : return mouseEvents('mouseup', inputObj, canvas);\n\n        case 'mouseenter'\t: return mouseEvents('mouseenter', inputObj, canvas);\n\n        case 'mouseleave'\t: return mouseEvents('mouseleave', inputObj, canvas);\n\n        case 'timeout'\t\t: return timeout(inputObj);\n\n        /*\n         * Shortcuts\n         */\n\n        case 'enter'\t: return keypressed(_.assign({key:13},inputObj));\n\n        case 'space'\t: return keypressed(_.assign({key:32},inputObj));\n\n        case 'esc'\t    : return keypressed(_.assign({key:27},inputObj));\n\n        case 'leftTouch'\t:\n            inputObj.element = createElement(inputObj.css, {\n                position: 'absolute',\n                left: 0,\n                width: '30%',\n                height: '100%',\n                background: '#00FF00',\n                opacity: 0.3\n            });\n\n            return mouseEvents('mousedown', inputObj);\n\n        case 'rightTouch'\t:\n            inputObj.element = createElement(inputObj.css, {\n                position: 'absolute',\n                right: 0,\n                width: '30%',\n                height: '100%',\n                background: '#00FF00',\n                opacity: 0.3\n            });\n\n            return mouseEvents('mousedown', inputObj);\n\n        case 'topTouch'\t:\n            inputObj.element = createElement(inputObj.css, {\n                position: 'absolute',\n                top: 0,\n                width: '100%',\n                height: '30%',\n                background: '#00FF00',\n                opacity: 0.3\n            });\n\n            return mouseEvents('mousedown', inputObj);\n\n        case 'bottomTouch'\t:\n            inputObj.element = createElement(inputObj.css, {\n                position: 'absolute',\n                bottom: 0,\n                width: '100%',\n                height: '30%',\n                background: '#00FF00',\n                opacity: 0.3\n            });\n\n            return mouseEvents('mousedown', inputObj);\n\n        default:\n            throw new Error('You have an input element with an unrecognized \"on\" property: ' + on);\n\n    }\n\n\n    function createElement(css2, css1){\n        var el = document.createElement('div');\n        css(el, css1);\n        css(el, css2);\n        return el;\n    }\n}\n","import binder from './binder';\nimport stream from 'mithril-stream';\nimport _ from 'lodash';\n\nexport default createListener;\n\nfunction createListener(inputObj,canvas){\n    var $listener = getListener(inputObj, canvas);\n\n    if (!isStream($listener)) throw new Error('Input functions must return valid streams: ' + logObj(inputObj));\n    if ('handle' in inputObj) $listener.handle = inputObj.handle;\n\n    return $listener;\n}\n\nfunction getListener(inputObj, canvas){\n    var $listener;\n\n    if (_.isFunction(inputObj)) return inputObj(inputObj, canvas, stream);\n\n    if (_.isPlainObject(inputObj)) {\n        if (_.isString(inputObj.on)) return binder(inputObj,canvas,stream);\n\n        if (_.isFunction(inputObj.on )) $listener = inputObj.on(inputObj,canvas,stream);\n        if (_.isFunction(inputObj.off)) $listener.end.map(inputObj.off);\n    }\n        \n    throw new Error('Input must only contain objects and functions, do you have an undefined value?');\n}\n\nfunction logObj(obj){\n    return _.isFunction(obj) ? obj.toString() : JSON.stringify(obj);\n}\n\n\nfunction isStream(stream) {return stream._state; }\n","export default window.performance.now\n    ? window.performance.now.bind(window.performance)\n\n    // We aren't using the absoulte time anywhere so we can use raw Date.now as a replacement\n    // if we're not on IE9\n    : Date.now.bind(Date);\n","import createListener from './createListener';\nimport now from './now';\n\nexport default interfaceFn;\n\n// @TODO: remove dependency on trial. only canvas is essential, and adding trial can be exported\nfunction interfaceFn($events, canvas){\n    var listenerStack = []; // holds all active listeners\n    var baseTime = 0;\n\n    return { add:add,remove:remove,removeAll:removeAll,resetTimer:resetTimer };\n\n    function add(inputObj){\n        if (!inputObj) throw new Error('Missing input element. Could not add input listener');\n        var $listener = createListener(inputObj, canvas);\n        $listener.map(addDetails).map($events); // pipe events to $events\n        listenerStack.push($listener);\n\n        function addDetails(event){\n            return {\n                handle      : $listener.handle,\n                event       : event,\n                timestamp\t: +new Date(),\n                latency\t\t: now() - baseTime\n            };\n        }\n    }\n\n    function remove(handle){\n        // go through the listener stack and remove any listeners that fit the handle\n        // note that we do this in reverse so that the index does not change\n        for (var i = listenerStack.length - 1; i >= 0 ; i--){\n            var $listener = listenerStack[i];\n            if ($listener.handle === handle){\n                $listener.end(true);\n                listenerStack.splice(i,1);\n            }\n        }\n    }\n\n    function removeAll(){\n        listenerStack.forEach(function($listener){\n            $listener.end(true);\n        });\n        listenerStack.length = 0;\n    }\n\n    function resetTimer(){ baseTime = now(); }\n}\n","export default getMedia;\n\nfunction getMedia(media){\n    // all templateing is done within the inflate trial function and the sequencer\n    var template = media.html || media.inlineTemplate || media.template; // give inline template precedence over template, because tempaltes are loaded into inlinetemplate\n    var el;\n\n    if (media.word) {\n        el = document.createElement('div');\n        el.textContent = media.word;\n        return Promise.resolve(el);\n    }\n\n    if (media.image) {\n        // at this time, we count on the preloader to throw for errors\n        // the reject option isn't really being used here...\n        return new Promise(function(resolve, reject){\n            el = document.createElement('img');\n            el.onload = function(){resolve(el);};\n            el.onerror = function(){reject(new Error('Image not found: ' + el.src ));};\n            el.src = media.image;\n        });\n    }\n\n    if (media.jquery) Promise.reject(new Error('Jquery is no longer supported in minno-time'));\n\n    if (template) { // html | template | inlineTemplate\n        el = document.createElement('div');\n        el.innerHTML = template;\n        return Promise.resolve(el);\n    } \n\n    return Promise.reject(new Error('Unrecognized media type')); // this is not a supported html type\n}\n","export default setSize;\n\nfunction setSize(el, stimulus){\n    var style = el.style;\n    var size = stimulus.size || {};\n\n    if (size.font_size) style.fontSize = size.font_size;\n\n    // if this is a word, we don't want to set height (it breaks centering)\n    if (isSet('height', size) && !stimulus.media.word) style.height = size.height + '%';\n\n    if (isSet('width', size)) style.width = size.width + '%';\n\n    return el;\n}\n\nfunction isSet(prop, obj){return prop in obj;}\n","import fastdom from 'fastdom';\n\nexport default setPlace;\n\nvar YCLASS = 'minno-stimulus-center-y';\nvar XCLASS = 'minno-stimulus-center-x';\n\nfunction setPlace(el,stimulus){\n    var location = stimulus.location || {};\n\n    // set offsets:\n    if (location.top == 'center' || location.bottom == 'center' || (location.top === undefined && location.bottom === undefined)) el.classList.add(YCLASS);\n    if (location.left == 'center' || location.right == 'center' || (location.left === undefined && location.right === undefined)) el.classList.add(XCLASS);\n\n    ['top','bottom','left','right'].forEach(setNumericLocation);\n\n    function isNumeric(val) {return !isNaN(+val);}\n    function setNumericLocation(attr){ if (isNumeric(location[attr])) el.style[attr] = location[attr] + '%'; }\n}\n\nexport function fixIE(el, resolve){\n    var style = el.style;\n\n    // count on setplace to findout when we need to center\n    var xCenter = el.classList.contains(XCLASS);\n    var yCenter = el.classList.contains(YCLASS);\n\n    if (!xCenter && !yCenter) return resolve(el);\n\n    fastdom.measure(function(){\n        var computedStyle = window.getComputedStyle(el);\n        var width = parseFloat(computedStyle.width);\n        var height = parseFloat(computedStyle.height);\n\n        fastdom.mutate(function(){\n            // location (left/top) is set to 50% within the center class\n            // we're adding the margin on IE where the transform does not work well\n            // we need to cancel the transform set within the class though...\n            style.transform = 'none';\n            if (xCenter) style.marginLeft = '-' + (width/2) + 'px';\n            if (yCenter) style.marginTop = '-' + (height/2) + 'px';\n        });\n\n    });\n}\n","import fastdom from 'fastdom';\nimport getMedia from './getMedia';\nimport setSize from './setSize';\nimport setPlace, {fixIE} from './setPlace';\nimport css from 'minno-css';\n\nexport default Stimulus;\n\nfunction Stimulus(stimulus, trial, canvas){\n    var self = {\n        el: null, // is set within init, some methods will break if not called before init...\n        source: stimulus,\n        trial: trial,\n        canvas: canvas,\n        init: init,\n        show: show,\n        hide: hide,\n        name: name,\n        mediaName: mediaName,\n        destroy: destroy\n    };\n\n    // make sure we have a data object\n    self.data = stimulus.data || {};\n\n    // set the handle\n    self.handle = self.data.handle = self.data.handle || stimulus.handle || stimulus.set;\n\n    return self;\n}\n\n\nfunction init(){\n    if (!this.source.media) throw new Error('Media object not defined for ' + this.name());\n\n    return getMedia(this.source.media)\n        .then(setupElement.bind(this, this.canvas));\n}\n\nfunction setupElement(canvas, el){\n    var self = this;\n    this.el = el;\n    return new Promise(function(resolve){\n        fastdom.mutate(function initStim(){\n            // setup element\n            el.classList.add('minno-stimulus');\n            el.setAttribute('data-handle', self.handle); // data-handle for handeling of mouse/touch interactions\n            setSize(el, self.source);\n            setPlace(el, self.source);\n            css(el, self.source.css || {});\n\n            if (self.source.isLayout) el.classList.add('minno-stimulus-visible');\n\n            // append to canvas\n            canvas.appendChild(el);\n\n            if (document.documentMode) fixIE(el, resolve);\n            else resolve(el);\n        });\n    });\n}\n\nfunction show(){\n    var el = this.el;\n    if (!el) throw new Error('A stimulus can not be shown before init is called');\n\n    fastdom.mutate(function showStim(){\n        el.classList.add('minno-stimulus-visible');\n    });\n}\n\nfunction hide(){\n    var el = this.el;\n    if (!el) throw new Error('A stimulus can not be hidden before init is called');\n\n    fastdom.mutate(function hideStim(){\n        el.classList.remove('minno-stimulus-visible');\n    });\n}\n\nfunction destroy(){\n    var el = this.el;\n    var canvas = this.canvas;\n    fastdom.mutate(function removeStim(){\n        canvas.removeChild(el);\n    });\n}\n\nfunction name(){\n    var source = this.source;\n    // if we have an alias ues it\n    if (source.alias) {return source.alias;}\n    if (this.data.alias) {return this.data.alias;} // if we have an alias ues it\n\n    if (source.inherit && source.inherit.set) {return source.inherit.set;} // otherwise try using the set we inherited from\n    if (this.handle) {return this.handle;} // otherwise use handle\n\n    // if no individual name is given, we set a default at the collection level\n}\n\nfunction mediaName(options){\n    var media = this.source.media;\n    var fullpath = options && options.fullpath; // as set within settings\n\n    if (media.alias) {return media.alias;} // if we have an alias ues it\n\n    for (var prop in media) {\n        if (contains(['image','template'],prop)) return fullpath ? media[prop] : media[prop].replace(/^.*[\\\\/]/, '');\n\n        // sometimes we have an empty value (this happens when we load a template and then translate it into an inline template)\n        if (contains(['word','html','inlineTemplate'],prop) && media[prop]) return media[prop];\n    }\n\n    // if no individual name is given, we set a default at the collection level\n}\n\nfunction contains(arr, val){ return arr.indexOf(val) != -1;}\n","import Stimulus from './Stimulus';\n\nexport default stimCollection;\n\nfunction stimCollection(trial, canvas){\n    var source = trial._source;\n    var stimuli = source.stimuli.map(toStim);\n    var layout = source.layout.map(toLayout).map(toStim);\n    var ready = Promise.all(stimuli.concat(layout).map(function(stim){return stim.init();}));\n    var self = {\n        canvas: canvas,\n        stimuli: stimuli,\n        layout: layout,\n        ready: ready,\n        getStimlist: getStimlist,\n        getMedialist: getMedialist,\n        destroy: destroy\n    };\n\n    return self;\n\n    function toStim(stim){ return Stimulus(stim, trial, canvas); }\n    function toLayout(stim){ stim.isLayout = true; return stim;}\n}\n\nfunction getStimlist(){\n    return this.stimuli\n        .filter(function(stim){return !stim.source.nolog;})\n        .map(function(stim, index){return stim.name() || ('stim' + index);});\n}\n\nfunction getMedialist(options){\n    return this.stimuli\n        .filter(function(stim){return !stim.source.nolog;})\n        .map(function(stim, index){return stim.mediaName(options) || ('media' + index);});\n}\n\nfunction destroy(){\n    this.stimuli.concat(this.layout).forEach(function(stim){stim.destroy();});\n}\n","import _ from 'lodash';\nimport globalGetter from '../../global';\n\nvar global = globalGetter();\nvar conditionHash = {\n    begin:begin,\n    inputEquals:inputEquals,\n    inputEqualsTrial:inputEqualsTrial,\n    inputEqualsStim:inputEqualsStim,\n    trialEquals:trialEquals,\n    inputEqualsGlobal:inputEqualsGlobal,\n    globalEquals:globalEquals,\n    globalEqualsTrial:globalEqualsTrial,\n    globalEqualsStim:globalEqualsStim,\n    currentEquals:currentEquals,\n    currentEqualsTrial:currentEqualsTrial,\n    currentEqualsStim:currentEqualsStim,\n    inputEqualsCurrent:inputEqualsCurrent,\n    fn:fn,\n    custom:custom,\n\n};\n\nexport default function getConditonFn(condition){\n    if (_.isFunction(condition)) return condition;\n    if (_.isFunction(conditionHash[condition.type])) return conditionHash[condition.type];\n    throw new Error('Unknown condition type: ' + JSON.stringify(condition));\n}\n\nfunction begin(inputData){ return inputData.type === 'begin'; }\n\nfunction inputEquals(inputData, condition){\n    var values = Array.isArray(condition.value) ? condition.value : [condition.value];\n    return values.indexOf(inputData.handle) !== -1;\n}\n\nfunction inputEqualsTrial(inputData, condition, trial){ return inputData.handle === trial.data[condition.property]; }\n\nfunction inputEqualsStim(inputData, condition, trial){\n    // create search object\n    var searchObj = {};\n    if (condition.handle) searchObj['handle'] = condition.handle;\n    searchObj[condition.property] = inputData.handle;\n\n    // are there stimuli answering this descriptions?\n    return hasData(searchObj,trial);\n}\n\nfunction trialEquals(inputData, condition, trial){\n    if (typeof condition.property == 'undefined' || typeof condition.value == 'undefined') throw new Error('trialEquals requires both \"property\" and \"value\" to be defined');\n    return condition.value === trial.data[condition.property];\n}\n\nfunction inputEqualsGlobal(inputData, condition){\n    if (typeof condition.property == 'undefined') throw new Error('inputEqualsGlobal requires \"property\" to be defined');\n    return inputData.handle === global[condition.property];\n}\n\nfunction globalEquals(inputData, condition){\n    if (typeof condition.property == 'undefined' || typeof condition.value == 'undefined') throw new Error('globalEquals requires both \"property\" and \"value\" to be defined');\n    return condition.value === global[condition.property];\n}\n\nfunction globalEqualsTrial(inputData, condition, trial){\n    if (typeof condition.globalProp == 'undefined' || typeof condition.trialProp == 'undefined') throw new Error('globalEqualsTrial requires both \"globalProp\" and \"trialProp\" to be defined');\n    return global[condition.globalProp] !== trial.data[condition.trialProp];\n}\n\nfunction globalEqualsStim(inputData, condition, trial){\n    if (typeof condition.globalProp == 'undefined' || typeof condition.stimProp == 'undefined') throw new Error('globalEqualsStim requires both \"globalProp\" and \"stimProp\" to be defined');\n\n    // create search object\n    var searchObj = {};\n    if (condition.handle) searchObj['handle'] = condition.handle;\n    searchObj[condition.stimProp] = global[condition.globalProp];\n\n    // are there stimuli answering this descriptions?\n    return hasData(searchObj,trial);\n}\n\nfunction inputEqualsCurrent(inputData, condition){\n    var current = global.current;\n    if (typeof condition.property == 'undefined') throw new Error('inputEqualsCurrent requires \"property\" to be defined');\n    return inputData.handle === current[condition.property];\n}\nfunction currentEquals(inputData, condition){\n    var current = global.current;\n    if (typeof condition.property == 'undefined' || typeof condition.value == 'undefined') throw new Error('currentEquals requires both \"property\" and \"value\" to be defined');\n    return condition.value !== current[condition.property];\n}\n\nfunction currentEqualsTrial(inputData, condition, trial){\n    var current = global.current;\n    if (typeof condition.currentProp == 'undefined' || typeof condition.trialProp == 'undefined') throw new Error('currentEqualsTrial requires both \"currentProp\" and \"trialProp\" to be defined');\n    return current[condition.currentProp] === trial.data[condition.trialProp];\n}\n\nfunction currentEqualsStim(inputData, condition, trial){\n    var current = global.current;\n    if (typeof condition.currentProp == 'undefined' || typeof condition.stimProp == 'undefined') throw new Error('currentEqualsStim requires both \"currentProp\" and \"stimProp\" to be defined');\n\n    // create search object\n    var searchObj = {};\n    if (condition.handle) searchObj['handle'] = condition.handle;\n    searchObj[condition.stimProp] = current[condition.currentProp];\n\n    // are there stimuli answering this descriptions?\n    return hasData(searchObj, trial);\n}\n\nfunction fn(inputData, condition, trial){\n    return condition.value.apply(trial,[condition,inputData, trial]);\n}\n\nfunction custom(inputData, condition, trial){\n    return condition.fn.apply(null, [condition, inputData, trial]);\n}\n\nfunction hasData(searchObj, trial){\n    return trial.stimulusCollection.stimuli.some(function(stim){\n        var data = stim.data;\n        for (var key in searchObj) {\n            if (searchObj[key] !== data[key]) return false;\n        }\n        return true;\n    });\n}\n","/*\n * gets a condition array (or a single condition) and evaluates it\n * returns true if all statements are true, false otherwise\n *\n * a single condition looks like this:\n *\n *\tcondition = {\n *\t\ttype : 'begin/inputEquals/inputEqualsTrial/inputEqualsStim/function',\n *\t\tvalue: 'right/trialAttribute/stimAttribute/customFunction',\n *\t\thandle: 'stim handle' (optional in case we're targeting a stimulus)\n *\t}\n *\n */\n\nimport getConditionFn from './getConditionFn';\n\nexport default conditionsEvaluate;\n\nfunction conditionsEvaluate(conditions, inputData, trial){\n    if (!conditions) throw new Error('There is an interaction without conditions!!');\n\n    // make sure conditions is an array\n    conditions = Array.isArray(conditions) ? conditions : [conditions];\n\n    // if this is a begin event, make sure we only run conditions that have begin in them\n    if (inputData.type == 'begin' && conditions.every(function(condition){return condition.type != 'begin';})) return false;\n\n    return conditions.every(checkCondition);\n\n\n    function checkCondition(condition){\n        return getConditionFn(condition)(condition, inputData, trial);\n    }\n}\n","import _ from 'lodash';\nimport fastdom from 'fastdom';\nimport global from '../../global';\nimport applyCanvasStyles from '../../task/canvas/applyCanvasStyles';\n\nexport default actions;\n\n// @TODO: see if we can afford to change the signature of actions\n// I'd like to have the trial go first here (used almost always).\nvar actions = {\n    /*\n     * Stimulus actions\n     */\n    showStim: function(action, eventData, trial){\n        var handle = action.handle || action;\n        trial.stimulusCollection.stimuli.forEach(function(stim){\n            if (handle == 'All' || stim.handle == handle) stim.show();\n        });\n    },\n\n    hideStim: function(action, eventData, trial){\n        var handle = action.handle || action;\n        trial.stimulusCollection.stimuli.forEach(function(stim){\n            if (handle == 'All' || stim.handle == handle) stim.hide();\n        });\n    },\n\n    setStimAttr: function(action, eventData, trial){\n        var handle = action.handle;\n        var setter = action.setter;\n        trial.stimulusCollection.stimuli.forEach(function(stim){\n            if (handle == 'All' || stim.handle == handle) {\n                if (_.isFunction(setter)) setter.apply(stim);\n                else _.extend(stim.data, setter);\n            }\n        });\n    },\n\n    /*\n     * Trial actions\n     */\n\n    setTrialAttr: function(action, eventData, trial){\n        var setter = action.setter;\n        if (typeof setter == 'undefined') throw new Error('The setTrialAttr action requires a setter property');\n        if (_.isFunction(setter)) setter.apply(trial, [trial.data,eventData]);\n        else _.extend(trial.data,setter);\n    },\n\n    setInput: function(action, eventData, trial){\n        if (typeof action.input == 'undefined') throw new Error('The setInput action requires an input property');\n        trial.input.add(action.input);\n    },\n\n    trigger: function(action, eventData, trial){\n        if (typeof action.handle == 'undefined') throw new Error('The trigger action requires a handle property');\n        trial.input.add({handle:action.handle, on:'timeout', duration:+action.duration || 0});\n    },\n\n    removeInput: function(action, eventData, trial){\n        var input = trial.input;\n        var handleList = action.handle;\n        if (typeof handleList == 'undefined') throw new Error('The removeInput action requires a handle property');\n        if (handleList == 'All' || _.include(handleList,'All')) input.removeAll();\n        else input.remove(handleList);\n    },\n\n    goto: function(action, eventData, trial){\n        trial._next = [action.destination,action.properties];\n    },\n\n    endTrial: function(action, eventData, trial){\n        trial.end();\n    },\n\n    resetTimer: function(action,eventData,trial){\n        // when to reset timer\n        action.immidiate ? reset() :  fastdom.mutate(reset);\n\n        function reset(){\n            eventData.latency = 0;\n            trial.input.resetTimer();\n        }\n    },\n\n    /*\n     * Logger\n     */\n\n    log: function(action,eventData,trial){\n        trial.$logs(arguments);\n    },\n\n    /*\n     * Misc\n     */\n\n    setGlobalAttr: function(action){\n        switch (typeof action.setter){\n            case 'function':\n                action.setter.apply(null,[global(), action]);\n                break;\n            case 'object':\n                _.extend(global(), action.setter);\n                break;\n            default:\n                throw new Error('setGlobalAttr requires a \"setter\" property');\n        }\n    },\n\n    custom: function(action,eventData, trial){\n        if (typeof action.fn != 'function') throw new Error('The custom action requires a fn propery');\n        action.fn(action, eventData, trial);\n    },\n\n    canvas: function(action, eventData, trial){\n        var canvas = trial.cavnas;\n        var map = {\n            background \t\t\t: {element: document.body, property: 'backgroundColor'},\n            canvasBackground\t: {element: canvas, property:'backgroundColor'},\n            borderColor\t\t\t: {element: canvas, property:'borderColor'},\n            borderWidth\t\t\t: {element: canvas, property:'borderWidth'}\n        };\n\n        // settings activator\n        var off = applyCanvasStyles(map, _.pick(action,['background','canvasBackground','borderColor','borderWidth']));\n        trial.$end.map(off);\n    }\n\n};\n\n","/*\n * accepts an array of actions (or a single action)\n * and applies them\n *\n * actions = [\n *\t\t{type:actionName,more:options},\n *\t\t{actionName:options}\n * ]\n * @param actions: single action object or array of action objects\n * @param eventData: eventData object\n * @returns Boolean continueActions: whether this action stops further action activations\n */\n\nimport _ from 'lodash';\nimport actionList from './actionList';\n\nexport default applyActions;\n\nfunction applyActions(actions, eventData, trial){\n    // marks whether this is the final action to take\n    var continueActions = true;\n\n    if (!actions) throw new Error('There is an interaction without actions!!');\n\n    actions = _.isArray(actions) ? actions : [actions];\n\n    _.forEach(actions,function(action){\n        var actionFn = actionList[action.type];\n        if (!actionFn) throw new Error('unknown action: ' + action.type);\n\n        // the only reason to halt action activation is the endTrial command\n        if (action.type === 'endTrial') continueActions = false;\n        actionFn(action, eventData, trial);\n    });\n\n    return continueActions;\n}\n","/*\n* Organizer for the interaction function\n*/\n\nimport evaluate from './conditionsEvaluate';\nimport activate from './action';\n\nexport default interactions;\n\n/*\n * Trial -> Event -> Event\n * \n * Can use trial to produce side efects\n **/\nfunction interactions(trial){\n    var interactions = trial._source.interactions;\n    var isDebug = trial._source.DEBUG && window.DEBUG;\n\n    // @TODO: validate interactions (isArray[Object], Object has conditions, Object has actions\n    \n    return eventMap;\n    function eventMap(event){\n        var i, interaction, conditionTrue;\n\n\n        // eslint-disable-next-line no-console\n        if (isDebug) console.groupCollapsed('Event: ' + (event.handle || event.type), event);\n\n        // use an explicit for loop because we need to be able to break\n        for (i=0; i<interactions.length; i++){\n            interaction = interactions[i];\n            conditionTrue = evaluate(interaction.conditions, event, trial);\n\n            // eslint-disable-next-line no-console\n            if (isDebug) console.log(conditionTrue, interaction.conditions);\n\n            // if this action includes endTrial we want to stop evalutation\n            // otherwise we might evaluate using data from the next trial by accident...\n            if (conditionTrue) if ( !activate(interaction.actions, event, trial) ) break;\n        }\n\n        // eslint-disable-next-line no-console\n        if (isDebug) console.groupEnd('Event: ' + (event.handle || event.type));\n\n        return event;\n    }\n}\n","import _ from 'lodash';\nimport input from './input/input';\nimport stimulusCollection from './stimulus/stimulusCollection';\nimport interactions from './interactions/interactions';\nimport stream from 'mithril-stream';\n\nexport default Trial;\n\nvar gid = 0;\n\n// data is already fully inflated\nfunction Trial(source, canvas, settings){\n    // make sure we have all our stuff :)\n    if (!source.interactions) throw new Error('Interactions not defined');\n\n    this.canvas = canvas;\n    this.settings = settings;\n    this._source = source;\n\n    this.$logs = stream();\n    this.$events = stream();\n    this.$end = this.$events.end;\n\n    // make sure we always have a data container\n    this.data = source.data || {};\n\n    // create a uniqueId for this trial\n    this._id = _.uniqueId('trial_');\n    this.counter = gid++;\n\n    this.input = input(this.$events, canvas);\n    this.stimulusCollection = stimulusCollection(this, canvas);\n\n    // listen for interactions\n    this.$events\n        .map(addTrialDetails(this))\n        .map(interactions(this));\n\n    // the next trial we want to play\n    // by default this is simply the next trial, this can be changed using the goto action\n    // the syntax is [destination, properties]\n    this._next = ['next',{}];\n\n    function addTrialDetails(trial){\n        return function(event){\n            return _.assign(event, {\n                trialId     : trial._id,\n                counter     : trial.counter\n            });\n        };\n    }\n}\n\n_.extend(Trial.prototype,{\n    start: function(){\n        var trial = this;\n\n        // eslint-disable-next-line no-console\n        if (this._source.DEBUG && window.DEBUG) console.group('Trial: ' + this.counter); \n\n        // wait until all simuli are loaded\n        return trial.stimulusCollection.ready\n            .then(function(){\n\n                // activate input\n                arrayWrap(trial._source.input).forEach(trial.input.add); // add each input\n                trial.input.resetTimer(); // reset the interface timer so that event latencies are relative to now.\n\n                // start running\n                trial.$events({type:'begin',latency:0});\n            });\n    },\n\n    end: function(){\n\n        // eslint-disable-next-line no-console\n        if (this._source.DEBUG && window.DEBUG) console.groupEnd('Trial: ' + this.counter); \n\n        // cancel all listeners\n        this.input.removeAll();\n\n        this.$events.end(true);\n        this.$end(true);\n    },\n\n    name: function(){\n        // if we have an alias ues it\n        if (this.alias) { return this.alias; }\n        if (this.data.alias) { return this.data.alias; }\n\n        // otherwise try using the set we inherited from\n        if (_.isString(this._source.inherit)){ return this._source.inherit; }\n        if (_.isPlainObject(this._source.inherit)){\n            return this._source.inherit.set;\n        }\n\n        // we're out of options here\n    }\n});\n\nfunction arrayWrap(arr){\n    if (!arr){return [];}\n    return _.isArray(arr) ? arr : [arr];\n}\n\n","import _ from 'lodash';\nimport globalGetter from '../../global';\nimport buildUrl from './buildUrl';\n\nexport default nextTrial;\n\nfunction nextTrial(db, settings, goto){\n    var destination = goto[0], properties = goto[1];\n    var sequence = db.currentSequence;\n    var global = globalGetter();\n    var context = {global: global, current: global.current};\n    var source;\n\n    sequence.go(destination, properties, context);\n    source = sequence.current(context, {skip:['layout','stimuli']});\n\n    if (!source) return {done:true};\n\n    source.stimuli = _.map(source.stimuli || [], buildStim, context);\n    source.layout = _.map(source.layout || [], buildStim, context);\n\n    context.trialData = null;\n\n    return {value:source};\n\n    function buildMedia(stim, prop, context){\n        var val = stim[prop];\n\n        if (_.isUndefined(val)) return false;\n        if (_.isString(val)) val = {word: val};\n\n        val = db.inflate('media', val, context);\n\n        // note that the base url is added to the media object during the sequence preload\n        // if needed, build url\n        if (val.image) val.image = buildUrl(settings.base_url, val.image, 'image');\n\n        if (val.template){\n            // @TODO: remove dependency on requirejs\n            val.inlineTemplate = requirejs('text!' + buildUrl(settings.base_url, val.template, 'template'));\n            val.inlineTemplate = _.template(val.inlineTemplate)(context);\n        }\n\n        stim[prop] = val;\n\n        context.mediaData = null;\n        context.mediaMeta = null;\n    }\n\n    function buildStim(stim){\n        var context = this;\n\n        stim = db.inflate('stimulus', stim, context, {skip:['media','touchMedia']});\n        buildMedia(stim, 'media', context);\n        buildMedia(stim, 'touchMedia', context);\n        context.stimulusData = null;\n        context.stimulusMeta = null;\n        return stim;\n    }\n}\n","export default post;\n\nfunction post(url, data){\n    return new Promise(function(resolve, reject){\n        var request = new XMLHttpRequest();\n        request.open('POST',url, true);\n        request.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');\n\n        request.onreadystatechange = function() {\n            if (this.readyState === 4) {\n                if (this.status >= 200 && this.status < 400) resolve(this.responseText);\n                else reject(new Error('Failed posting to: ' + url));\n            }\n        };\n\n        request.send(serialize(data));\n    });\n}\n\nfunction serialize(data) {\n    if (typeof data == 'string') return data;\n    return JSON.stringify(data);\n}\n","import _ from 'lodash';\nimport post from './post';\n\nexport default poster;\n\nfunction poster($logs, settings){\n    var cache = [];\n    var url = settings.url;\n\n    if (!url) return; // if we have no url, we can't log anything anyway\n\n    $logs.map(eachLog);\n    $logs.end.map(finalizefLogs);\n\n    function eachLog(log){\n        cache.push(log);\n        if (!settings.pulse) return;\n        if (cache.length >= settings.pulse) {\n            send(cache);\n            cache.length = 0;\n        }\n    }\n\n    function finalizefLogs(){\n        if (cache.length) send(cache);\n    }\n\n    function send(logs){\n        var serializedPost = settings.newServelet ? buildPost(logs, settings.metaData) : buildPostOld(logs, settings.metaData);\n\n        return post(url,serializedPost)\n            .catch(function retry(){ return post(url, serializedPost); })\n            .catch(settings.error || _.noop);\n    }\n\n}\n\nexport function buildPost(logs, metaData){\n    var data = _.assign({ data:logs }, metaData);\n    return JSON.stringify(data);\n}\n\nexport function buildPostOld(logs, metaData){\n    var data = 'json=' + JSON.stringify(logs); // do not re-encode json\n    var meta = serialize(metaData);\n    return data + (meta ? '&'+meta : '');\n}\n\n\nfunction serialize(data){\n    var key, r = [];\n    for (key in data) r.push(encodeURIComponent(key) + '=' + encodeURIComponent(data[key]));\n    return r.join('&').replace(/%20/g, '+');\n}\n","import _ from 'lodash';\n\nexport default transformLogs;\n\nfunction transformLogs(action,eventData,trial){\n    var global = window.piGlobal;\n    var trialData = trial.data, inputData = eventData, logStack = global.current.logs;\n    var fullpath = _.get(trial, 'settings.logger.fullpath', false);\n\n    var stimList = trial.stimulusCollection.getStimlist();\n    var mediaList = trial.stimulusCollection.getMedialist({fullpath:fullpath});\n\n    return {\n        log_serial : logStack.length,\n        trial_id: trial.counter,\n        name: trial.name(),\n        responseHandle: inputData.handle,\n        latency: Math.floor(inputData.latency),\n        stimuli: stimList,\n        media: mediaList,\n        data: trialData\n    };\n}\n","import poster from './poster';\nimport transformLogs from './transformLogs';\nimport global from '../../global';\n\nexport default createLogs;\n\nfunction createLogs($logs, settings){\n    var $sink = $logs.map(applyMap(settings.logger || settings.transformLogs || transformLogs));\n    $sink.map(function(log){\n        global().current.logs.push(log);\n    });\n\n    poster($sink, settings);\n    if (settings.poster) settings.poster($sink, settings);\n\n    return $sink;\n\n    // $logs is a stream of array, we want to apply them as args to the transform function\n    function applyMap(fn){\n        return function(args){ return fn.apply(null,args); };\n    }\n}\n","import _ from 'lodash';\nimport stream from 'mithril-stream';\nimport fastdom from 'fastdom';\n\nimport Trial from './trial/Trial';\nimport nextTrial from './task/sequencer/nextTrial';\nimport createLogs from './task/logger/createLogs';\n\nexport default playerPhase;\n\n/**\n * run the task\n * @param canvas : htmlElement\n * @returns sink : {end, promise}\n **/\n\nfunction playerPhase(sink){\n    var canvas = sink.canvas;\n    var db = sink.db;\n    var settings = sink.settings;\n\n    var $source = stream();\n    var $trial = $source.map(activateTrial());\n    var $logs = stream();\n\n    var onDone = _.get(settings, 'hooks.endTask', settings.onEnd || _.noop);\n\n    $source.end\n        .map(clearCanvas)\n        .map(onDone);\n\n    return _.extend({\n        $trial:$trial, \n        end: $source.end.bind(null,true), \n        $logs: createLogs($logs, settings.logger || {}), \n        start: play.bind(null, ['next', {}])\n    }, sink);\n\n    function clearCanvas(){\n        var trial = $trial();\n        if (trial) trial.stimulusCollection.destroy();\n    }\n\n    function play(goto){\n        var next = nextTrial(db, settings, goto);\n        if (next.done) $source.end(true);\n        else $source(next.value);\n    }\n\n    function activateTrial(cache){\n        return activate;\n        function activate(source){\n            var oldTrial = cache;\n            var trial = cache = new Trial(source, canvas, settings);\n            trial.$logs.map($logs); \n            trial.$end\n                .map(function(){\n                    play(trial._next); // when we're done try to play the next one\n                });\n\n            trial.start();\n\n            if (oldTrial) {\n                // we leave the old stimuli until the current ones are visiblie to maintain the continuity between trials\n                // This mutate waits until the first mutation in order to schedudual the removal of the old stimuli\n                fastdom.mutate(function oldtrial(){\n                    oldTrial.stimulusCollection.destroy();\n                });\n            }\n\n            return trial;\n        }\n    }\n}\n","import './polyfills';\n\nimport setup from './app/setup';\nimport preloadPhase from './app/preloadPhase';\nimport playPhase from './app/playPhase';\n\nexport default activate;\n\n/**\n * activate : (HTMLelement, timeScript) -> Sink\n *\n * timeScript : {settings, sequence, trialSets, stimulusSets, mediaSets, current}\n * Sink: {$trial, $logs, play, end}\n **/\nfunction activate(canvas, script){\n    var sink = setup(canvas, script);\n    var playSink = playPhase(sink);\n\n    playSink.$trial.end.map(playSink.$resize.end.bind(null, true)); // end resize stream\n\n    // preload Images, then start \"playPhase\"\n    preloadPhase(canvas, script).then(playSink.start);\n\n    return playSink;\n}\n\n"],"names":["global","go","createDB","getSize","parse","applyCanvasStyles","css","adjustCanvas","setup","canvasSetup","preloader","define","this","preloadPhase","scriptPreloader","mouseEvents","keypressed","keyup","timeout","randomize","createListener","binder","stream","getMedia","setSize","setPlace","Stimulus","destroy","globalGetter","getConditionFn","actions","actionList","interactions","evaluate","activate","Trial","input","stimulusCollection","nextTrial","post","serialize","poster","transformLogs","createLogs","playPhase"],"mappings":"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"}